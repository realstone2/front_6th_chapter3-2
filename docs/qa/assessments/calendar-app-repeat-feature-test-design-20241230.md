# Test Design: 반복 일정 기능 회귀테스트

Date: 2024-12-30
Designer: Quinn (Test Architect)

## 회귀테스트 전략 개요

### 목적

반복 일정 기능 추가 시 기존 캘린더 앱의 모든 기능이 정상 동작하는지 확인하는 포괄적인 회귀테스트 설계

### 총 테스트 시나리오

- 총 테스트 시나리오: 47개
- 시각적 회귀테스트: 8개 (17%)
- 기능 회귀테스트: 25개 (53%)
- 통합 회귀테스트: 14개 (30%)
- 우선순위 분포: P0: 28개, P1: 13개, P2: 6개

## 회귀테스트 시나리오 상세

### 1. 시각적 회귀테스트 (Visual Regression)

#### 1.1 월별/주별 뷰 UI 일관성

| ID          | Level | Priority | Test                         | Justification                              |
| ----------- | ----- | -------- | ---------------------------- | ------------------------------------------ |
| REG-VIS-001 | E2E   | P0       | 월별 뷰 레이아웃 일관성 검증 | 반복 아이콘 추가로 인한 레이아웃 깨짐 방지 |
| REG-VIS-002 | E2E   | P0       | 주별 뷰 레이아웃 일관성 검증 | 반복 아이콘 추가로 인한 레이아웃 깨짐 방지 |
| REG-VIS-003 | E2E   | P1       | 이벤트 리스트 UI 일관성 검증 | 반복 정보 표시로 인한 레이아웃 변경        |

#### 1.2 폼 UI 반응성

| ID          | Level | Priority | Test                     | Justification                         |
| ----------- | ----- | -------- | ------------------------ | ------------------------------------- |
| REG-VIS-004 | E2E   | P0       | 일정 추가 폼 반응성 검증 | 반복 설정 UI 추가로 인한 폼 크기 변화 |
| REG-VIS-005 | E2E   | P1       | 일정 수정 폼 반응성 검증 | 기존 반복 정보 로드 시 UI 안정성      |

#### 1.3 아이콘 표시 일관성

| ID          | Level | Priority | Test                             | Justification                      |
| ----------- | ----- | -------- | -------------------------------- | ---------------------------------- |
| REG-VIS-006 | Unit  | P0       | EventStatusIcons 컴포넌트 렌더링 | 알림/반복 아이콘 동시 표시 검증    |
| REG-VIS-007 | E2E   | P1       | 다중 상태 아이콘 정렬 검증       | 여러 상태 아이콘의 시각적 정렬     |
| REG-VIS-008 | E2E   | P2       | 반응형 아이콘 크기 조절          | 다양한 화면 크기에서의 아이콘 표시 |

### 2. 기능 회귀테스트 (Functional Regression)

#### 2.1 기본 CRUD 작업 안정성

| ID           | Level       | Priority | Test                     | Justification                             |
| ------------ | ----------- | -------- | ------------------------ | ----------------------------------------- |
| REG-FUNC-001 | Integration | P0       | 단일 일정 생성 기능 검증 | 반복 설정이 비활성화된 상태에서 기본 동작 |
| REG-FUNC-002 | Integration | P0       | 단일 일정 수정 기능 검증 | 기존 단일 일정 수정 시 반복 설정 미적용   |
| REG-FUNC-003 | Integration | P0       | 단일 일정 삭제 기능 검증 | 반복 기능 추가 후에도 기본 삭제 동작      |
| REG-FUNC-004 | Integration | P0       | 일정 목록 조회 기능 검증 | 반복 일정 혼재 시 정확한 목록 표시        |

#### 2.2 시간 검증 로직 안정성

| ID           | Level | Priority | Test                           | Justification                      |
| ------------ | ----- | -------- | ------------------------------ | ---------------------------------- |
| REG-FUNC-005 | Unit  | P0       | 시작/종료 시간 검증 로직 유지  | timeValidation 함수 동작 보장      |
| REG-FUNC-006 | Unit  | P0       | 겹치는 시간 감지 로직 유지     | eventOverlap 함수 정확성           |
| REG-FUNC-007 | E2E   | P0       | 시간 겹침 경고 다이얼로그 표시 | 반복 일정과 단일 일정 간 충돌 감지 |

#### 2.3 검색 기능 안정성

| ID           | Level | Priority | Test                            | Justification                     |
| ------------ | ----- | -------- | ------------------------------- | --------------------------------- |
| REG-FUNC-008 | Unit  | P0       | 기본 검색 필터링 동작 유지      | useSearch 훅 정상 동작            |
| REG-FUNC-009 | E2E   | P1       | 반복 일정 포함 검색 결과        | 반복 정보 텍스트도 검색 대상 포함 |
| REG-FUNC-010 | E2E   | P1       | 검색어 초기화 시 전체 목록 표시 | 반복/단일 일정 혼재 상황에서      |

#### 2.4 뷰 전환 기능 안정성

| ID           | Level | Priority | Test                         | Justification                          |
| ------------ | ----- | -------- | ---------------------------- | -------------------------------------- |
| REG-FUNC-011 | E2E   | P0       | 월별-주별 뷰 전환 동작       | 반복 일정 표시 상태에서 뷰 변경        |
| REG-FUNC-012 | E2E   | P1       | 날짜 네비게이션 동작         | 이전/다음 월/주 이동 시 반복 일정 표시 |
| REG-FUNC-013 | Unit  | P0       | useCalendarView 훅 상태 관리 | 뷰 상태 변경 로직 안정성               |

#### 2.5 카테고리 및 폼 검증

| ID           | Level | Priority | Test                    | Justification                   |
| ------------ | ----- | -------- | ----------------------- | ------------------------------- |
| REG-FUNC-014 | Unit  | P0       | 카테고리 선택 로직 유지 | 기존 카테고리 옵션 정상 동작    |
| REG-FUNC-015 | E2E   | P1       | 폼 필수 필드 검증 유지  | 반복 설정 추가 후에도 기본 검증 |
| REG-FUNC-016 | E2E   | P1       | 폼 초기화 기능 검증     | resetForm 함수 완전한 초기화    |

#### 2.6 날짜 유틸리티 기능

| ID           | Level | Priority | Test                       | Justification                 |
| ------------ | ----- | -------- | -------------------------- | ----------------------------- |
| REG-FUNC-017 | Unit  | P0       | 날짜 포맷팅 함수 동작 유지 | dateUtils 모든 함수 정상성    |
| REG-FUNC-018 | Unit  | P0       | 주/월 계산 로직 정확성     | getWeekDates, getWeeksAtMonth |
| REG-FUNC-019 | Unit  | P1       | 공휴일 데이터 처리 안정성  | 반복 일정과 공휴일 동시 표시  |

#### 2.7 이벤트 상태 관리

| ID           | Level       | Priority | Test                         | Justification                       |
| ------------ | ----------- | -------- | ---------------------------- | ----------------------------------- |
| REG-FUNC-020 | Integration | P0       | useEventOperations 훅 안정성 | 기존 이벤트 관리 로직 보존          |
| REG-FUNC-021 | Integration | P0       | useEventForm 훅 상태 관리    | 새 반복 필드 추가 후 기존 필드 동작 |
| REG-FUNC-022 | Unit        | P1       | 이벤트 객체 타입 호환성      | Event 타입 확장으로 인한 호환성     |

#### 2.8 에러 처리 및 검증

| ID           | Level | Priority | Test                          | Justification              |
| ------------ | ----- | -------- | ----------------------------- | -------------------------- |
| REG-FUNC-023 | E2E   | P1       | 필수 필드 누락 시 에러 메시지 | 기존 검증 메시지 표시 유지 |
| REG-FUNC-024 | E2E   | P2       | 네트워크 에러 시 처리         | API 호출 실패 상황 대응    |
| REG-FUNC-025 | E2E   | P2       | 잘못된 데이터 입력 시 처리    | 예외 상황에서의 앱 안정성  |

### 3. 통합 회귀테스트 (Integration Regression)

#### 3.1 알림 시스템 통합

| ID          | Level       | Priority | Test                     | Justification              |
| ----------- | ----------- | -------- | ------------------------ | -------------------------- |
| REG-INT-001 | Integration | P0       | 기존 알림 기능 정상 동작 | useNotifications 훅 안정성 |
| REG-INT-002 | Integration | P0       | 알림 시간 계산 정확성    | 기존 알림 로직 보존        |
| REG-INT-003 | Integration | P1       | 알림 목록 관리 기능      | 알림 추가/제거 동작        |
| REG-INT-004 | E2E         | P1       | 알림 UI 표시 및 제거     | 알림 스낵바 정상 동작      |

#### 3.2 Mock 시스템 호환성

| ID          | Level       | Priority | Test                        | Justification                     |
| ----------- | ----------- | -------- | --------------------------- | --------------------------------- |
| REG-INT-005 | Integration | P0       | 기존 Mock Handler 정상 동작 | handlersUtils 기존 함수들         |
| REG-INT-006 | Integration | P0       | API 응답 구조 호환성        | Event 타입 확장으로 인한 API 변경 |
| REG-INT-007 | Integration | P1       | Mock 데이터 생성 유틸리티   | createMockEvent 함수 동작         |

#### 3.3 전체 사용자 여정

| ID          | Level | Priority | Test                            | Justification                       |
| ----------- | ----- | -------- | ------------------------------- | ----------------------------------- |
| REG-INT-008 | E2E   | P0       | 완전한 일정 생성-조회-수정-삭제 | 전체 CRUD 사이클 검증               |
| REG-INT-009 | E2E   | P0       | 뷰 전환 중 데이터 일관성        | 월별/주별 뷰에서 동일한 데이터 표시 |
| REG-INT-010 | E2E   | P1       | 검색 후 수정 작업 연계          | 검색 결과에서 수정 시 정상 동작     |
| REG-INT-011 | E2E   | P1       | 알림 발생 후 일정 관리          | 알림된 일정의 수정/삭제             |

#### 3.4 성능 및 메모리 관리

| ID          | Level       | Priority | Test                  | Justification                   |
| ----------- | ----------- | -------- | --------------------- | ------------------------------- |
| REG-INT-012 | Integration | P1       | 대량 일정 처리 성능   | 반복 일정 추가로 인한 성능 영향 |
| REG-INT-013 | Integration | P2       | 메모리 누수 없음 확인 | 새로운 상태 관리로 인한 메모리  |
| REG-INT-014 | Integration | P2       | 렌더링 최적화 유지    | 불필요한 리렌더링 방지          |

## 기존 테스트와의 연계

### 활용할 기존 테스트 패턴

1. **medium.integration.spec.tsx**: 사용자 여정 테스트 패턴
2. **useEventOperations.spec.ts**: 훅 테스트 패턴
3. **easy.\*.spec.ts**: 유닛 테스트 패턴
4. **handlersUtils.ts**: Mock 데이터 관리 패턴

### 확장이 필요한 기존 테스트

- `saveSchedule` 헬퍼 함수에 반복 설정 옵션 추가
- `setupMockHandlerCreation` 에 반복 일정 지원
- `EventStatusIcons` 컴포넌트 분리 후 독립 테스트

## 회귀테스트 실행 전략

### Phase 1: 빠른 검증 (P0 우선)

1. 모든 Unit 테스트 (15분 이내)
2. 핵심 Integration 테스트 (30분 이내)
3. 필수 E2E 테스트 (1시간 이내)

### Phase 2: 포괄적 검증 (P1)

1. 확장된 Integration 테스트
2. 사용자 여정 E2E 테스트
3. 시각적 회귀테스트

### Phase 3: 완전 검증 (P2)

1. 성능 테스트
2. 에지 케이스 테스트
3. 브라우저 호환성 테스트

## 위험 요소 및 완화 방안

### 높은 위험

- **EventStatusIcons 컴포넌트 분리**: 기존 아이콘 표시 로직 영향
- **Event 타입 확장**: 기존 코드의 타입 호환성 문제
- **useEventForm 훅 확장**: 기존 폼 상태 관리 영향

### 완화 방안

- 타입 변경 전후 모든 관련 테스트 실행
- 기존 인터페이스 보존하며 점진적 확장
- 백워드 호환성 유지를 위한 기본값 설정

## 테스트 자동화 권장사항

### CI/CD 파이프라인 통합

1. **Pre-commit**: P0 Unit 테스트
2. **PR 검증**: P0 + P1 테스트
3. **배포 전**: 전체 회귀테스트

### 테스트 실행 순서

1. 기존 테스트 먼저 실행 (회귀 확인)
2. 새 기능 테스트 추가 실행
3. 통합 시나리오 테스트 마지막 실행

이 회귀테스트 설계를 통해 반복 일정 기능 추가 시에도 기존 캘린더 앱의 모든 기능이 안정적으로 동작함을 보장할 수 있습니다.
