# 추가 요구사항 구현 분석

## 현재 코드 분석

### 기존 반복 일정 구조 (주석 처리됨)

```typescript
// App.tsx 440-478행에 주석 처리된 반복 일정 UI
repeat: {
  type: isRepeating ? repeatType : 'none',
  interval: repeatInterval,
  endDate: repeatEndDate || undefined,
}
```

### 현재 Event 타입 구조

```typescript
// types.ts에서 확인 필요
Event {
  id, title, date, startTime, endTime, description, location, category,
  repeat: { type, interval, endDate },
  notificationTime
}
```

## 요구사항별 구현 분석

### 1. (필수) 반복 유형 선택

**구현 위치**: App.tsx 440-478행 주석 해제 및 수정
**필요 작업**:

- `RepeatType` import 활성화 (38행)
- `setRepeatType`, `setRepeatInterval`, `setRepeatEndDate` 활성화 (80-84행)
- 반복 설정 UI 활성화 (441-478행)
- 매일/매주/매월/매년 옵션 확인

**특수 조건 처리**:

- 31일 매월 반복: 매월 31일에만 생성 (28/29/30일 월은 건너뛰기)
- 윤년 29일 매년 반복: 29일에만 생성 (평년은 건너뛰기)

### 2. (필수) 반복 일정 표시

**구현 위치**:

- renderWeekView() 함수 (148-223행)
- renderMonthView() 함수 (225-314행)
- 이벤트 박스 렌더링 부분 (188-212행, 275-299행)

**필요 작업**:

- 반복 일정 감지 로직: `event.repeat.type !== 'none'`
- 아이콘 추가 (기존 Notifications 아이콘 패턴 참고)
- 반복 아이콘 표시 조건문 추가

### 3. (필수) 반복 종료 조건

**구현 위치**: App.tsx 468-475행 (주석 해제)
**필요 작업**:

- 반복 종료일 TextField 활성화
- 최대 날짜 제한: 2025-10-30
- 날짜 유효성 검증 로직

### 4. (필수) 반복 일정 단일 수정

**구현 위치**:

- editEvent 함수 (useEventForm.ts)
- 이벤트 수정 로직 (App.tsx 110-146행)

**필요 작업**:

- 반복 일정 수정 시 `repeat.type = 'none'` 변경
- 수정된 일정을 새로운 단일 일정으로 저장
- 원본 반복 시리즈는 유지, 해당 날짜만 예외 처리

### 5. (필수) 반복 일정 단일 삭제

**구현 위치**:

- deleteEvent 함수 (useEventOperations.ts)
- 삭제 버튼 핸들러 (App.tsx 582행)

**필요 작업**:

- 반복 일정 삭제 시 해당 날짜만 제거
- 원본 반복 시리즈는 유지
- 예외 날짜 목록 관리 필요

## 구현 우선순위

### Phase 1: 기본 반복 기능 활성화

1. 주석 처리된 반복 UI 활성화
2. RepeatType import 및 관련 state 활성화
3. 기본 반복 로직 구현

### Phase 2: 반복 일정 시각화

1. 반복 아이콘 추가
2. 캘린더 뷰에서 반복 일정 구분 표시
3. 이벤트 목록에서 반복 정보 표시

### Phase 3: 고급 반복 로직

1. 특수 날짜 조건 처리 (31일, 윤년 29일)
2. 반복 종료 조건 적용
3. 반복 일정 생성 알고리즘

### Phase 4: 개별 수정/삭제

1. 반복 일정 단일 수정 로직
2. 반복 일정 단일 삭제 로직
3. 예외 처리 시스템

## 주요 기술적 고려사항

### 데이터 구조 확장

```typescript
// 예외 처리를 위한 구조 확장 필요
repeat: {
  type: 'daily' | 'weekly' | 'monthly' | 'yearly' | 'none',
  interval: number,
  endDate?: string,
  exceptions?: string[] // 제외된 날짜들
}
```

### 반복 일정 생성 알고리즘

- 시작일부터 종료일까지 반복 패턴 적용
- 특수 조건 (31일, 윤년) 처리
- 예외 날짜 제외
- 성능 최적화 (최대 생성 개수 제한)

### UI/UX 고려사항

- 반복 일정 수정/삭제 시 사용자 확인
- 반복 아이콘 직관적 디자인
- 반복 정보 명확한 표시

이 분석을 바탕으로 구현을 진행하시겠습니까, 아니면 특정 부분에 대해 더 자세한 분석이 필요하신가요?
